<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
<script>
  const socket = io('https://pedidosnordestao.onrender.com'); // seu dom√≠nio ou localhost
  socket.on('connect', () => console.log('üîå Conectado ao WebSocket'));

  socket.on('novo-pedido', pedido => {
    // Evita duplica√ß√£o
    if (seenOrders.has(pedido._id)) return;
    seenOrders.add(pedido._id);

    // Notifica√ß√£o sonora
    playNotificationSound();

    // Criar pedido novo na tela
    const el = document.createElement('div');
    el.id = `pedido-${pedido._id}`;
    el.className = 'flex flex-col sm:flex-row justify-between items-start bg-gray-50 p-3 rounded-lg gap-2';
    el.innerHTML = `
      <div class="flex-1">
        <div class="text-gray-700 font-semibold">${pedido.numeroCompra}</div>
        <div class="text-gray-700">${pedido.descricao}</div>
      </div>
    `;

    const tempoSpan = document.createElement('span');
    tempoSpan.className = 'text-sm text-blue-600 font-mono';
    el.appendChild(tempoSpan);

    cronometros[pedido._id] = { elemento: tempoSpan, criadoEmMS: pedido.criadoEmMS };

    const btnF = document.createElement('button');
    btnF.textContent = 'Finalizar';
    btnF.className = 'bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition font-semibold';
    btnF.onclick = () => finalizarPedido(pedido._id);
    el.appendChild(btnF);

    pedidosDiv.appendChild(el);
  });
</script>
